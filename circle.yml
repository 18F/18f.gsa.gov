machine:
  ruby:
    version:
      2.3.1

dependencies:
  pre:
    - bundle install
    - bundle exec jekyll build
    # uncomment to restore pa11y-ci
    # - nvm install stable && nvm alias default stable
    #
    - npm test
    # uncomment to restore pa11y-ci
    # - npm install -g pa11y-ci
    #
  override:
    - npm install -g accesslint-cli
    - gem install accesslint-ci

test:
  pre:
    - bundle exec jekyll test
    - bundle exec htmlproofer _site --disable-external --allow-hash-href --empty-alt-ignore --url-ignore 18f@gsa.gov
    # uncomment to restore pa11y-ci
    # - npm run --harmony lint-508
  post:
    - bundle exec rails server -d -p 3000
    - accesslint-ci scan http://localhost:3000
